"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),PorterStemmer=function(){function e(){_classCallCheck(this,e);var t="[aeiouy]",n="[^aeiou][^aeiouy]*",s=t+"[aeiou]*";this.mgr0="^("+n+")?"+s+n,this.meq1="^("+n+")?"+s+n+"("+s+")?$",this.mgr1="^("+n+")?"+s+n+s+n,this.hasVowel="^("+n+")?"+t,this.step1a={sses:"ss",ies:"i",ss:"ss",s:""},this.step1b={eed:"ee",ed:"",ing:"",at:"ate",bl:"ble",iz:"ize"},this.step1c={y:"i"},this.step2={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",abli:"able",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble"},this.step3={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},this.step4={al:"",ance:"",ence:"",er:"",ic:"",able:"",ible:"",ant:"",ement:"",ment:"",ent:"",ion:"",ou:"",ism:"",ate:"",iti:"",ous:"",ive:"",ize:""},this.step5a={e:""}}return _createClass(e,[{key:"stem",value:function(e){var t=this;e=e.toLowerCase().replace(/[^a-zA-Z]+/g,""),console.log(e),console.log("\n--Step 1--");var n=Object.keys(this.step1a).filter(function(t){return new RegExp(t+"$").test(e)}).map(function(e){return{stem:e,len:e.length}}).reduce(function(e,t){return e.len>t.len?e:t},!1);console.log(n),n&&(e=e.replace(new RegExp(n.stem+"$"),this.step1a[n.stem])),console.log(e);e.endsWith("eed")&&new RegExp(this.mgr0).test(e.substr(0,e.lastIndexOf("eed")))?e=e.replace(new RegExp("eed$"),this.step1b.eed):e.endsWith("ed")&&new RegExp(this.hasVowel).test(e.substr(0,e.lastIndexOf("ed")))?e=e.replace(new RegExp("ed$"),this.step1b.ed):e.endsWith("ing")&&new RegExp(this.hasVowel).test(e.substr(0,e.lastIndexOf("ing")))&&(e=e.replace(new RegExp("ing$"),this.step1b.ing)),e.endsWith("at")?e=e.replace(new RegExp("at$"),this.step1b.at):e.endsWith("bl")?e=e.replace(new RegExp("bl$"),this.step1b.bl):e.endsWith("iz")?e=e.replace(new RegExp("iz$"),this.step1b.ize):e[e.length-1]&&e[e.length-2]&&e[e.length-1]===e[e.length-2]&&"l"!==e[e.length-1]&&"s"!==e[e.length-1]&&"z"!==e[e.length-1]?e=e.replace(new RegExp(""+e[e.length-1]+e[e.length-1]+"$"),e[e.length-1]):new RegExp(this.meq1).test(e)&&e[e.length-1]&&e[e.length-2]&&e[e.length-3]&&/[^aeiou]/.test(e[e.length-3])&&/[^aeiou]/.test(e[e.length-1])&&/[aeiouy]/.test(e[e.length-2])&&(e+="e"),e.endsWith("y")&&new RegExp(this.hasVowel).test(e.substr(0,e.lastIndexOf("y")))&&(e=e.replace(new RegExp("y$"),this.step1c.i)),console.log("\n--Step 2--");var s=Object.keys(this.step2).filter(function(n){var s=e.lastIndexOf(n);return-1!==s&&new RegExp(t.mgr0).test(e.substr(0,s))}).map(function(e){return{stem:e,len:e.length}}).reduce(function(e,t){return e.len>t.len?e:t},!1);console.log(s),s&&(e=e.replace(new RegExp(s.stem+"$"),this.step2[s.stem])),console.log(e),console.log("\n--Step 3--");var l=Object.keys(this.step3).filter(function(n){var s=e.lastIndexOf(n);return-1!==s&&new RegExp(t.mgr0).test(e.substr(0,s))}).map(function(e){return{stem:e,len:e.length}}).reduce(function(e,t){return e.len>t.len?e:t},!1);console.log(l),l&&(e=e.replace(new RegExp(l.stem+"$"),this.step3[l.stem])),console.log(e),console.log("\n--Step 4--");var i=Object.keys(this.step4).filter(function(n){var s=e.lastIndexOf(n);if("ion"===n){var l=e.substr(0,s);return-1!==s&&(new RegExp(t.mgr1).test(l)&&(l.endsWith("s")||l.endsWith("t")))}return-1!==s&&new RegExp(t.mgr1).test(e.substr(0,s))}).map(function(e){return{stem:e,len:e.length}}).reduce(function(e,t){return e.len>t.len?e:t},!1);return console.log(i),i&&(e=e.replace(new RegExp(i.stem+"$"),this.step4[i.stem])),console.log(e),e.endsWith("e")&&new RegExp(this.mgr1).test(e.substr(0,e.lastIndexOf("e")))?e=e.slice(0,e.length-1):!e.endsWith("e")||e[e.length-2]&&e[e.length-3]&&e[e.length-4]&&/[^aeiou]/.test(e[e.length-4])&&/[^aeiou]/.test(e[e.length-2])&&/[aeiouy]/.test(e[e.length-3])||!new RegExp(this.meq1).test(e.substr(0,e.lastIndexOf("e")))||(e=e.slice(0,e.length-1)),e.endsWith("l")&&e[e.length-1]&&e[e.length-2]&&e[e.length-1]===e[e.length-2]&&new RegExp(this.mgr1).test(e.substr(0,e.length-1))&&(e=e.replace(new RegExp(""+e[e.length-1]+e[e.length-1]+"$"),e[e.length-1])),console.log(e),e}}]),e}();module.exports={PorterStemmer:PorterStemmer};